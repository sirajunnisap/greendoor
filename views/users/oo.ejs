<%- include("./layout/header.ejs") %>
<%- include("./layout/nav.ejs") %>


    <body class="shop_page">
        <div id="ec-overlay"><span class="loader_img"></span></div>

    
        <!-- ekka Cart End -->

        <!-- Ec breadcrumb start -->
        <div class="sticky-header-next-sec  ec-breadcrumb section-space-mb">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="row ec_breadcrumb_inner">
                            <div class="col-md-6 col-sm-12">
                                <h2 class="ec-breadcrumb-title">User Invoice</h2>
                            </div>
                            <div class="col-md-6 col-sm-12">
                                <!-- ec-breadcrumb-list start -->
                                <ul class="ec-breadcrumb-list">
                                    <li class="ec-breadcrumb-item"><a href="index.html">Home</a></li>
                                    <li class="ec-breadcrumb-item active">Invoice</li>
                                </ul>
                                <!-- ec-breadcrumb-list end -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ec breadcrumb end -->

        <!-- User invoice section -->
        <section class="ec-page-content ec-vendor-uploads ec-user-account section-space-p">
            <div class="container">
                <div class="row">
                    <!-- Sidebar Area Start -->
                    <div class="ec-shop-leftside ec-vendor-sidebar col-lg-3 col-md-12">
                        <div class="ec-sidebar-wrap">
                           
                        </div>
                    </div>
                    <div class="ec-shop-rightside col-lg-9 col-md-12">
                        <div class="ec-vendor-dashboard-card">
                            <div class="ec-vendor-card-header">
                                <h5>Invoice</h5>
                                <div class="ec-header-btn">

                                    <button type="button" class="btn bt btn-lg btn-secondary" data-bs-toggle="modal"
                                        data-bs-target="#exampleModal">
                                        Download invoice
                                    </button>

                                </div>
                            </div>
                            <div class="ec-vendor-card-body padding-b-0">
                                <div class="page-content">
                                    <div class="page-header text-blue-d2">
                                        <img src="/images/logo/logo.png" alt="Site Logo">
                                    </div>

                                    <div class="container px-0">
                                        <div class="row mt-4">
                                            <div class="col-lg-12">
                                                <hr class="row brc-default-l1 mx-n1 mb-4" />
                                                <div class="row">
                                                    <div class="col-sm-6"
                                                        style="font-family: Arial, sans-serif; color: #333;">
                                                        <h4 style="font-size: 1.2em; font-weight: bold;">Shipping
                                                            Address</h4>
                                                        <ul style="list-style: none; padding: 0; margin: 0;">
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">Name:</span>
                                                                <span style="display: inline-block;">
                                                                    <%= orderData.address.fullName %>
                                                                </span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">House:</span>
                                                                <span style="display: inline-block;">
                                                                    <%= orderData.address.houseAddress %>
                                                                </span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">Street:</span>
                                                                <span style="display: inline-block;">
                                                                    <%= orderData.address.streetAddress %>
                                                                </span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">City:</span>
                                                                <span style="display: inline-block;">
                                                                    <%= orderData.address.cityName %>
                                                                </span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">State:</span>
                                                                <span style="display: inline-block;">
                                                                    <%= orderData.address.state %>
                                                                </span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">Postcode:</span>
                                                                <span style="display: inline-block;">
                                                                    <%= orderData.address.pincode %>
                                                                </span>
                                                            </li>
                                                        </ul>
                                                    </div>

                                                    <div class="col-sm-6"
                                                        style="font-family: Arial, sans-serif; color: #333;text-align: left;">
                                                        <h4 style="font-size: 1.2em; font-weight: bold;">Billing Address
                                                        </h4>
                                                        <ul class="text-left"
                                                            style="list-style: none; padding: 0; margin: 0;">
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">Street:</span>
                                                                <span style="display: inline-block;">56/8</span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">City:</span>
                                                                <span style="display: inline-block;">Los Angeles</span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">Country:</span>
                                                                <span style="display: inline-block;">United
                                                                    States</span>
                                                            </li>
                                                            <li>
                                                                <span
                                                                    style="display: inline-block; width: 80px; font-weight: bold;">Postcode:</span>
                                                                <span style="display: inline-block;">36952</span>
                                                            </li>
                                                        </ul>
                                                    </div>

                                                </div>


                                                <div class="mt-4">

                                                    <div class="text-95 text-secondary-d3">
                                                        <div class="ec-vendor-card-table">
                                                            <table class="table ec-table">

                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col" colspan="2">Product</th>
                                                                        <th scope="col">Quantity</th>
                                                                        <th scope="col">Total</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <% orderData.items.forEach((value)=> { %>
                                                                        <tr>
                                                                            <th colspan="2"><span>
                                                                                    <%= value.productId.productName%>
                                                                                </span></th>
                                                                            <th>
                                                                                <%= value.qty%>
                                                                            </th>
                                                                            <th> <span>₹<%= value.productTotalPrice%>
                                                                                </span></th>
                                                                        </tr>
                                                                        <% }) %>

                                                                            <tr>
                                                                                <th colspan="3">Subtotal</th>
                                                                                <th> <span>
                                                                                        <%=orderData.totalAmount%>
                                                                                    </span></th>
                                                                            </tr>
                                                                            <tr>
                                                                                <th colspan="3">discount</th>
                                                                                <% if(orderData.discount===0
                                                                                    ||orderData.discount===null ||
                                                                                    orderData.discount===undefined ){%>
                                                                                    <th><span> Nill</span></th>
                                                                                    <%} else { %>
                                                                                        <th><span>
                                                                                                <%= orderData.discount
                                                                                                    %>
                                                                                            </span></th>
                                                                                        <%}%>
                                                                            </tr>
                                                                </tbody>
                                                                <tfoot>
                                                                    <tr>
                                                                        <th scope="col" colspan="3">Total</th>
                                                                        <th scope="col">
                                                                            <%=orderData.totalAmount -
                                                                                orderData.discount %>
                                                                        </th>
                                                                    </tr>


                                                                </tfoot>

                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End User invoice section -->


        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!DOCTYPE html>
                        <html>

                        <head>
                            <meta charset="utf-8" />
                            <title>Tax Invoice</title>
                            <link rel="shortcut icon" type="image/png" href="./favicon.png" />
                            <style>
                                * {
                                    box-sizing: border-box;
                                }
                                .table-bordered td,
                                .table-bordered th {
                                    border: 1px solid #ddd;
                                    padding: 10px;
                                    word-break: break-all;
                                }
                                body {
                                    font-family: Arial, Helvetica, sans-serif;
                                    margin: 0;
                                    padding: 0;
                                    font-size: 16px;
                                }
                                .h4-14 h4 {
                                    font-size: 12px;
                                    margin-top: 0;
                                    margin-bottom: 5px;
                                }
                                .img {
                                    margin-left: "auto";
                                    margin-top: "auto";
                                    height: 30px;
                                }
                                pre,
                                p {
                                    /* width: 99%; */
                                    /* overflow: auto; */
                                    /* bpicklist: 1px solid #aaa; */
                                    padding: 0;
                                    margin: 0;
                                }
                                table {
                                    font-family: arial, sans-serif;
                                    width: 100%;
                                    border-collapse: collapse;
                                    padding: 1px;
                                }
                                .hm-p p {
                                    text-align: left;
                                    padding: 1px;
                                    padding: 5px 4px;
                                }
                                td,
                                th {
                                    text-align: left;
                                    padding: 8px 6px;
                                }
                                .table-b td,
                                .table-b th {
                                    border: 1px solid #ddd;
                                }
                                .hm-p td,
                                .hm-p th {
                                    padding: 3px 0px;
                                }
                                .cropped {
                                    float: right;
                                    margin-bottom: 20px;
                                    height: 100px;
                                    /* height of container */
                                    overflow: hidden;
                                }
                                .cropped img {
                                    width: 400px;
                                    margin: 8px 0px 0px 80px;
                                }
                                .main-pd-wrapper {
                                    box-shadow: 0 0 10px #ddd;
                                    background-color: #fff;
                                    border-radius: 10px;
                                    padding: 15px;
                                }
                                .table-bordered td,
                                .table-bordered th {
                                    border: 1px solid #ddd;
                                    padding: 10px;
                                    font-size: 14px;
                                }
                                .invoice-items {
                                    font-size: 14px;
                                    border-top: 1px dashed #ddd;
                                }
                                .invoice-items td {
                                    padding: 14px 0;
                                }
                            </style>
                        </head>

                        <body>
                            <section class="main-pd-wrapper" id="invoice" style="width: 450px; margin: auto">
                                <div style="
                                      text-align: center;
                                      margin: auto;
                                      line-height: 1.5;
                                      font-size: 14px;
                                      color: #4a4a4a;
                                    ">


                                    <p style="font-weight: bold; color: #000; margin-top: 15px; font-size: 18px;">
                                        Invoice/Bill Of Supply <span class="text-danger">StepUP</span> Retailers<br>
                                        Private Limited
                                    </p>
                                    <p style="margin: 15px auto;">
                                        A2, Test Street <br>
                                        Test Area Bangaluru 560001, Karnataka
                                    </p>
                                    <p>
                                        <b>GSTIN:</b> 0987653456789
                                    </p>
                                    <p>
                                        <b>CIN:</b> 0987653456789
                                    </p>
                                    <p>
                                        <b>FSSAI No. :</b> 0987653456789
                                    </p>
                                    <hr style="border: 1px dashed rgb(131, 131, 131); margin: 25px auto">
                                </div>
                                <table style="width: 100%; table-layout: fixed">
                                    <thead>
                                        <tr>
                                            <th style="width: 50px; padding-left: 0;">Sn.</th>
                                            <th style="width: 220px;">Item Name</th>
                                            <th>Price</th>
                                            <th>QTY</th>
                                            <th style="text-align: right; padding-right: 0;">Total Price</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <%orderData.items.forEach((product,index)=> { %>
                                            <tr class="invoice-items">
                                                <td>
                                                    <%= index+1 %>
                                                </td>
                                                <td>
                                                    <%= product.productId.name%>
                                                </td>
                                                <td>₹<%= product.price%>
                                                </td>
                                                <td>
                                                    <%= product.qty %> PC
                                                </td>
                                                <td style="text-align: right;">₹<%= product.productTotalPrice%>
                                                </td>
                                            </tr>
                                            <% }) %>


                                    </tbody>
                                </table>
                                <table style="width: 100%;
                                  margin-top: 15px;
                                  border: 1px dashed #00cd00;
                                  border-radius: 3px;">
                                    <thead>
                                        <tr>
                                            <th>Sub Total</th>

                                            <th style="text-align: right;">₹ <%= orderData.totalAmount %>
                                            </th>

                                        </tr>
                                        <tr>
                                            <td>Discount </td>

                                            <!-- <td style="text-align: right;">-₹ </td> -->

                                            <td style="text-align: right;">₹ <%= orderData.discount %>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td>Total Saving In Rs </td>

                                            <!-- <td style="text-align: right;">₹</td> -->

                                            <td style="text-align: right;">₹ 0</td>

                                        </tr>

                                    </thead>

                                </table>

                                <table class="my-3" style="width: 100%;
                                  background: #fcbd024f;
                                  border-radius: 4px;">
                                    <thead>
                                        <tr>
                                            <th>Total</th>
                                            <th style="text-align: center;">Item(<%= orderData.items.length %>)</th>
                                            <th>&nbsp;</th>
                                            <th style="text-align: right;">₹ <%=
                                                    orderData.totalAmount-orderData.discount %>
                                            </th>

                                        </tr>
                                    </thead>

                                </table>



                            </section>
                        </body>

                        </html>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn_3" onclick="invoice()">Save Invoice</button>
                    </div>
                </div>
            </div>
        </div>



        <script>
            function invoice() {
                var divToPrint = document.getElementById("invoice");
                var newWindow = window.open("", "Print Window");
                newWindow.document.write(divToPrint.outerHTML);
                newWindow.print();
                newWindow.close();
            }
        </script>








<%- include("./layout/footer.ejs") %>